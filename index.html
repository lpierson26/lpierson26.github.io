<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spin to Win — Venmo Only</title>

<style>
:root{
  --red:#dc2626;
  --blue:#1d4ed8;
  --white:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e2e8f0;
  --card:#f8fafc;
  --good:#059669;
  --bad:#dc2626;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,rgba(29,78,216,.06),rgba(220,38,38,.03));
  color:var(--text);
}

header{
  background:#fff;
  border-bottom:1px solid var(--border);
  padding:14px;
}

.brandBar{
  height:4px;
  background:linear-gradient(90deg,var(--blue),var(--white),var(--red));
  border-radius:999px;
  margin-bottom:10px;
}

.wrap{max-width:980px;margin:0 auto}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.between{justify-content:space-between}

.logo{
  height:44px;
  object-fit:contain;
}

main{padding:14px}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
}

.grid3{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
}
@media(max-width:900px){.grid3{grid-template-columns:1fr}}

.pill{
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#fff;
}
.pill.good{color:var(--good)}
.pill.bad{color:var(--bad)}
.pill.blue{color:var(--blue)}

.title{font-weight:900}
.sub{font-size:13px;color:var(--muted)}

button,a.btn{
  border:none;
  border-radius:12px;
  padding:10px 12px;
  font-weight:800;
  cursor:pointer;
  background:var(--blue);
  color:#fff;
  text-decoration:none;
}
button.secondary{
  background:#fff;
  color:var(--text);
  border:1px solid var(--border);
}
button:disabled{opacity:.5}

/* ✅ single photo centered */
.photos{
  display:flex;
  justify-content:center;
  margin-top:10px;
}

.photo{
  border:1px solid var(--border);
  border-radius:12px;
  overflow:hidden;
  background:#fff;
}

.photo img{
  width:100%;
  max-width:320px;
  height:180px;
  object-fit:contain;
  display:block;
}

.progressWrap{
  margin-top:10px;
  height:10px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
}
.bar{
  height:100%;
  background:linear-gradient(90deg,var(--blue),var(--red));
  width:0%;
}

.hidden{display:none}
.notice{
  margin-top:10px;
  border:1px dashed var(--border);
  border-radius:12px;
  padding:10px;
  font-size:13px;
  color:var(--muted);
  background:#fff;
}
</style>
</head>

<body>

<header>
  <div class="wrap">
    <div class="brandBar"></div>
    <div class="row between">
      <div class="row">
        <!-- ✅ logo stays -->
        <img src="images/logo.webp" class="logo" alt="Locker Room Legends">
        <div>
          <div class="title">Spin to Win</div>
          <div class="sub"><strong>Venmo only.</strong> Pay → return → submit.</div>
        </div>
      </div>
      <button id="btnReset" class="secondary">Reset</button>
    </div>
  </div>
</header>

<main class="wrap">

<section class="card">
  <div class="row between">
    <div>
      <div class="title">Pick a Spin</div>
      <div class="sub">One entry = one chance to win.</div>
    </div>
    <span id="globalStatus" class="pill">Open</span>
  </div>

  <div id="spinCards" class="grid3" style="margin-top:12px"></div>

  <div class="notice">
    Pay on Venmo → return → confirm payment → submit entry.
  </div>
</section>

</main>

<script>
const STORAGE_KEY="lrl_spin_single_photo_v1";
const DEFAULT_VENMO_RECEIVER="lockerroomlegends";

const DEFAULT_SPINS=[
  {
    id:"spin1",
    title:"Jersey Spin #1",
    desc:"Duke Boozer #12 Jersey",
    entryPrice:100,
    capacity:20,
    venmoReceiver:DEFAULT_VENMO_RECEIVER,
    photos:["images/boozer.jpg"]  // ✅ only first is used
  },
  {
    id:"spin2",
    title:"Jersey Spin #2",
    desc:"Duke Evans #3 Jersey",
    entryPrice:80,
    capacity:25,
    venmoReceiver:DEFAULT_VENMO_RECEIVER,
    photos:["images/evans.jpeg"]  // ✅ only first is used
  },
  {
    id:"spin3",
    title:"Jersey Spin #3",
    desc:"Illinois Wagler #23 Jersey",
    entryPrice:10,
    capacity:20,
    venmoReceiver:DEFAULT_VENMO_RECEIVER,
    photos:["images/test.webp"]   // ✅ only first is used
  }
];

const state=JSON.parse(localStorage.getItem(STORAGE_KEY))||{
  spins:DEFAULT_SPINS,
  entries:{spin1:[],spin2:[],spin3:[]}
};

function save(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state));}
function total(id){return state.entries[id].length;}
function remaining(s){return s.capacity-total(s.id);}

const spinCards=document.getElementById("spinCards");
const globalStatus=document.getElementById("globalStatus");

function render(){
  spinCards.innerHTML="";
  let open=false;

  state.spins.forEach(s=>{
    if(remaining(s)>0) open=true;

    // ✅ ONLY ONE PHOTO (first)
    const photo=(s.photos && s.photos.length) ? s.photos[0] : null;

    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      <div class="row between">
        <div>
          <div class="title">${s.title}</div>
          <div class="sub">${s.desc}</div>
        </div>
        <span class="pill blue">$${s.entryPrice}</span>
      </div>

      <div class="row" style="margin-top:6px">
        <span class="pill">${total(s.id)}/${s.capacity} filled</span>
        <span class="pill ${remaining(s)>0?"good":"bad"}">${remaining(s)>0?"Open":"Full"}</span>
      </div>

      <div class="progressWrap">
        <div class="bar" style="width:${(total(s.id)/s.capacity)*100}%"></div>
      </div>

      <div class="photos">
        ${photo ? `<div class="photo"><img src="${photo}" alt="Jersey photo"></div>` : ""}
      </div>

      <button ${remaining(s)<=0?"disabled":""} style="margin-top:10px;width:100%">
        ${remaining(s)<=0?"Full":"Choose Spin"}
      </button>
    `;
    spinCards.appendChild(div);
  });

  globalStatus.textContent=open?"Open":"All Full";
  globalStatus.className=`pill ${open?"good":"bad"}`;
}

document.getElementById("btnReset").onclick=()=>{
  if(confirm("Reset local data?")){
    localStorage.removeItem(STORAGE_KEY);
    location.reload();
  }
};

render();
</script>

</body>
</html>
